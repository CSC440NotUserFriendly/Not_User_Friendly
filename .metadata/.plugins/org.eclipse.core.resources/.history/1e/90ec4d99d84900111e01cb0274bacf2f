package com.csc440.nuf.components;

import java.lang.reflect.Field;

/**
 * CSC-440 SMIL Project
 * 01-22-2011
 * AbstractSMILObject.java
 * @author Brad Barker
 * 
 * Abstract class for defining mandatory requirements of SMIL objects.
 * All SMIL Object types MUST INHERIT FROM THIS CLASS, NO EXCEPTIONS!
 */

public abstract class AbstractSMILObject implements Comparable< AbstractSMILObject> {
	
	//Fields common to all SMIL Objects;
	private int startTime;
	private int endTime;
	
	//Must implement this method for the parser.
	abstract public void printData();
	
	//This is for parsing the numerical values that are ended with units (20px).
	public static int getIntValue(String s){
		
		String [] temp = s.split("\\D");
		
		if(temp[0].equals("")){
			return -1; //Invalid field
		}
		
		return	Integer.parseInt(temp[0]);
	}
	
	//Setters for fields
	public void setStartTime(int startTime){
		this.startTime = startTime;
	}
	public void setEndTime(int endTime){
		this.endTime = endTime;
	}
	
	//Getters for fields
	public int getStartTime(){
		return startTime;
	}
	public int getEndTime(){
		return endTime;
	}
	
	@Override
	public int compareTo(AbstractSMILObject o){
		return this.startTime - o.startTime;
	}
	
	/*
	 * "This" is why Polymorphism is awesome!
	 * when calling "this" from a subclass it will be
	 * in reference to itself and not THIS abstract class.
	 * 
	 */
	@Override
	public String toString(){
		
		StringBuilder output = new StringBuilder();
		
		output.append(this.getClass().getName() + "\n");
		Field [] f = this.getClass().getDeclaredFields();
		
		for(int i=0; i<f.length; i++){
			try {
				output.append(f[i].getName() + " : " + f[i].get(this) + "\n");
				
			} 
			catch (IllegalAccessException e) {
				output.append(f[i].getName() + " : " + "Unable to access\n");
			}
			
		}
		
		
		return output.toString();
	}

}
